---
import Card from "./Card.astro";
import type { PostType } from "../../ts/types.ts";

const devmode = import.meta.env.DEV

const url = "/api/getPosts"
const response = await fetch(
  devmode
    ? "http://localhost:4321" + url
    : import.meta.env.PROD_ADDRESS + url
)
const cards: PostType[] = await response.json()
---

<div class="border-x-2 border-slate-500 max-w-[800px] w-full h-4 flex-1 my-4 px-2 flex flex-col gap-2">
  {
    cards.map((card) =>
      <Card {...card}/>
    )
  }
</div>